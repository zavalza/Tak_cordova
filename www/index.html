<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" href="css/normalize.css" />
        <link rel="stylesheet" href="css/furatto.css" />
        <link rel="stylesheet" href="css/font-awesome.css" />
        <link rel="stylesheet" href="css/docs.css" />
        <link rel="stylesheet" href="css/examples.css" />
        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/styles.css">
        <link rel="shortcut icon" href="img/favicon.ico" />
        <title>Hello World</title>
    </head>
    <body>
        <div class="panels ">
          <div class="panel panel-left">
          </div>
        </div>

        <div class="panel-content">
          <div class="navbar navbar-fixed-top">
            <div class="navbar-inner docs-navbar-inner">
              <div class="container">
                <a href="#menu" class="menu-trigger meteocon" data-meteocon="M" data-toggle="panel" data-target="#menu"></a>
                <div class="nav-collapse collapse">
                  <nav id="menu">
                    <ul class="nav docs-navbar-menu">
                      <li><a class="brand" href="index.html">Tak</a></li>
                      <!-- <li class="active"><a href="#empezar">Registro</a></li> -->
                      <li class=""><a href="#descargar">Descarga</a></li>
                      <li class=""><a href="#">Contacto</a></li>  
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="section-jumbo-container" id="descargar">
              <h1 class="jumbo-header">Tak</h1> 
              <h2 class="motto"><b>Ofrece lo que haces a toda tu comunidad</b></h2>
              <img src="http://upload.wikimedia.org/wikipedia/commons/c/cd/Get_it_on_Google_play.svg" alt="" class="button" />
              <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Available_on_the_App_Store_(black)_SVG.svg/200px-Available_on_the_App_Store_(black)_SVG.svg.png" alt="" class="button" />
              <br>
              <br>
              <button onclick="login()">Login</button>
            <button onclick="me()">Me</button>
            <!--<button onclick="getSession()">Get session</button>-->
            <button onclick="getLoginStatus()">Get login</button>
            <button onclick="logout()">Logout</button>
            <button onclick="facebookWallPost()">facebookWallPost</button>
            <button onclick="publishStoryFriend()">friendstory</button>
            
            <div id="data">loading ...</div>
            
            <!--<script src="http://localhost:8080/target/target-script-min.js#anonymous"></script>-->
            <div id="fb-root"></div>
            <!-- cordova -->
            <script src="phongap.js"></script>
            <!-- cordova facebook plugin -->
            <script src="cdv-plugin-fb-connect.js"></script>
            <!-- facebook js sdk -->
            <script src="facebook-js-sdk.js"></script>
            
            <script>
                 <!-- These are the notifications that are displayed to the user through pop-ups if the above JS files does not exist in the same directory-->
                if ((typeof cordova == 'undefined') && (typeof Cordova == 'undefined')) alert('Cordova variable does not exist. Check that you have included cordova.js correctly');
                if (typeof CDV == 'undefined') alert('CDV variable does not exist. Check that you have included cdv-plugin-fb-connect.js correctly');
                if (typeof FB == 'undefined') alert('FB variable does not exist. Check that you have included the Facebook JS SDK file.');
                
                FB.Event.subscribe('auth.login', function(response) {
                                   alert('auth.login event');
                                   });
                
                FB.Event.subscribe('auth.logout', function(response) {
                                   alert('auth.logout event');
                                   });
                
                FB.Event.subscribe('auth.sessionChange', function(response) {
                                   alert('auth.sessionChange event');
                                   });
                
                FB.Event.subscribe('auth.statusChange', function(response) {
                                   alert('auth.statusChange event');
                                   });
                
                /*function getSession() {
                    alert("session: " + JSON.stringify(FB.getSession()));
                }
                */
                function getLoginStatus() {
                    FB.getLoginStatus(function(response) {
                                      if (response.status == 'connected') {
                                      alert('logged in');
                                      } else {
                                      alert('not logged in');
                                      }
                                      });
                }
                var friendIDs = [];
                var fdata;
                function me() {
                    FB.api('/me/friends', { fields: 'id, name, picture' },  function(response) {
                           if (response.error) {
                           alert(JSON.stringify(response.error));
                           } else {
                           var data = document.getElementById('data');
                           fdata=response.data;
                           console.log("fdata: "+fdata);
                           response.data.forEach(function(item) {
                                                 var d = document.createElement('div');
                                                 d.innerHTML = "<img src="+item.picture+"/>"+item.name;
                                                 data.appendChild(d);
                                                 });
                           }
                        var friends = response.data;
                        console.log(friends.length); 
                        for (var k = 0; k < friends.length && k < 200; k++) {
                            var friend = friends[k];
                            var index = 1;

                            friendIDs[k] = friend.id;
                            //friendsInfo[k] = friend;
                        }
                        console.log("friendId's: "+friendIDs);
                           });
                }
                
                function logout() {
                    FB.logout(function(response) {
                              alert('logged out');
                              });
                }
                
                function login() {
                    FB.login(
                             function(response) {
                             if (response.session) {
                             alert('logged in');
                             } else {
                             alert('not logged in');
                             }
                             },
                             { scope: "email" }
                             );
                }
                
                
                function facebookWallPost() {
                    console.log('Debug 1');
                    var params = {
                        method: 'feed',
                        name: 'Facebook Dialogs',
                        link: 'https://developers.facebook.com/docs/reference/dialogs/',
                        picture: 'http://fbrell.com/f8.jpg',
                        caption: 'Reference Documentation',
                        description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
                      };
                    console.log(params);
                    FB.ui(params, function(obj) { console.log(obj);});
                }
                
                function publishStoryFriend() {
                    randNum = Math.floor ( Math.random() * friendIDs.length ); 

                    var friendID = friendIDs[randNum];
                    if (friendID == undefined){
                        alert('please click the me button to get a list of friends first');
                    }else{
                        console.log("friend id: " + friendID );
                        console.log('Opening a dialog for friendID: ', friendID);
                        var params = {
                            method: 'feed',
                            to: friendID.toString(),
                            name: 'Facebook Dialogs',
                            link: 'https://developers.facebook.com/docs/reference/dialogs/',
                            picture: 'http://fbrell.com/f8.jpg',
                            caption: 'Reference Documentation',
                            description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
                        };
                        FB.ui(params, function(obj) { console.log(obj);});
                    }
                }
                
                document.addEventListener('deviceready', function() {
                                          try {
                                          alert('Device is ready! Make sure you set your app_id below this alert.');
                                          FB.init({ appId: "appid", nativeInterface: CDV.FB, useCachedDialogs: false });
                                          document.getElementById('data').innerHTML = "";
                                          } catch (e) {
                                          alert(e);
                                          }
                                          }, false);
                </script>
            <div id="log"></div>
              <!-- <div>
                <iframe width="380" height="280" src="https://www.youtube.com/embed/wrcSutoSe3U?html5=1" frameborder="0"></iframe>
              </div> -->
            </div>
            <div class="container-center">
              <div class="features">
                <div class="row">
                   <div class="col-6">
                    <h1 class="muted">Conecta</h1>  
                    <p class="feature-description">Conecta con personas que antes no conocías. Tak amplia tu círculo de contactos.</p>
                   </div>
                   <div class="col-6">
                     <img src="http://placehold.it/200x200" alt="" class="img img-well"/>
                   </div>
                </div>
                <div class="row">
                   <div class="col-6">
                     <img src="http://placehold.it/200x200" alt="" class="img img-well"/>
                   </div>
                   <div class="col-6">
                    <h1 class="muted">Encuentra</h1>  
                    <p class="feature-description">Encuentra a quien necesitas. Tak te permite explorar las habilidades que te rodean.</p>
                   </div>
                </div>
                <div class="row">
                   <div class="col-6">
                    <h1 class="muted">Gana</h1>  
                    <p class="feature-description">Gana dinero y/o experiencia por hacer lo que siempre haces.</p>
                   </div>
                   <div class="col-6">
                     <img src="http://placehold.it/200x200" alt="" class="img img-well"/>
                   </div>
                </div>
              </div>
            </div>

              <hr />
              <a href="#descargar" align="center" class="btn btn-info">Comienza ahora</a> 
              <div class="container-center">
                <div class="col-9">
                  <div class="row" align="left">
                    <div id="empezar">
                      <h2 class="header">Registro</h2>
                      <h4 class="light">Bienvenido a Tak, te pediremos algunos datos para que tu comunidad los conozca</h4>
                      <form name="Registro" id="formaDeRegistro">
                      <div class="form-fields">
                        <label for="">Nombre</label>
                        <input class="input-small" type="text" name="firstName" id="firstName"><br>
                      </div>
                      <div class="form-fields">
                        <label for="">Apellido (Opcional)</label>
                        <input class="input-small" type="text" name="lastName" id="lastName"><br>
                      </div>
                      <div class="form-fields">
                        <label for="email">Correo Electrónico</label>
                        <input class="input-small" type="text" name="email" id="email"><br>
                      </div>
                      <div class="form-fields">
                        <label for="email">Confirmar Correo Electrónico</label>
                        <input class="input-small" type="text" name="emailAgain" id="emailAgain"><br>
                      </div>
                      <div class="form-fields">
                          <label for="">Celular (Opcional)</label>
                          <input class="input-small" type="number" name="mobile" id="mobile"><br>
                      </div>
                      <div class="form-fields">
                        <label for="">Las habilidades que podrías ofrecer a los demás</label>
                        <input class="input-small" placeholder="¿Qué sabes hacer? Ejemplo: "type="text"><br>
                        <input class="input-small" placeholder="¿Qué sabes hacer?" type="text"><br>
                        <input class="input-small" placeholder="¿Qué sabes hacer?" type="text"><br>
                        <a href="javascript:void()" class="btn btn-info">Añadir más</a> 
                      </div>
                      <div class="form-fields">
                        <label for="select">Área donde puedes ofrecer estas habilidades </label>
                        <select>
                          <option>Elige el punto donde te sería más cómodo</option>
                          <option>EMIS</option>
                          <option>Tenológico de Monterrey Campus Monterrey</option>
                          <option>UANL Campus Mederos</option>
                        </select>
                        <a href="javascript:initializeMap()" class="btn btn-info">Ver mapa</a>
                      </div>
                        <div id="map-canvas" style="width: 400px; height: 350px; display: none;"></div>
                      <a href="javascript:saveInParse()" class="btn btn-info">Listo</a> 
                      </form>
                    </div>
                  </div>
                </div>
                <div class="col-3">
                    <div class="row">
                      <img src="http://placehold.it/250x350" alt="" class="img" />
                    </div>
                </div>      
            </div>
            <div class="row footer">
                    <p class="copyright">Copyright <a href="#" class="docs-license">Tak Labs</a></p>
                    <ul class="inline">
                      
                    </ul>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
        <script src="js/jquery.js"></script>
        <script src="js/furatto.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.13.min.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
        <script>
        var map;
        function initializeMap() {
          var mapOptions = {
            zoom: 14,
            center: new google.maps.LatLng(25.673211, -100.309201),
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var canvas = document.getElementById('map-canvas');

          canvas.style.display == "block" ? canvas.style.display = "none" : canvas.style.display = "block"; 
          map = new google.maps.Map(canvas,
              mapOptions);
        }
        //google.maps.event.addDomListener(window, 'load', initialize);
        </script>
        <script type="text/javascript">
          Parse.initialize("B2AsSpbJ98QFl0GJl5LP1oOEe1sZl8RDoNwVyQkl", "L0RBfJKlY4NDEIW6D29rWVBFNBqHmD191GM6cgmI");
          var NewUser = Parse.Object.extend("newUsers");

          function saveInParse()
          {
              var newUser = new NewUser();
               var data = parseInt(document.getElementById('mobile').value);
              console.log(data);
              console.log(typeof data);

              newUser.set("firstName", document.getElementById('firstName').value.toString());
              newUser.set("lastName", document.getElementById('lastName').value.toString());
              newUser.set("email", document.getElementById('email').value.toString());
              newUser.set("mobile", parseInt(document.getElementById('mobile').value));
              // newUser.save({firstName: Name}, {
              //   success: function(newUser) {
              //     // Execute any logic that should take place after the object is saved.
              //     alert('New object created with objectId: ' + newUser.id);
              //   },
              //   error: function(newUser, error) {
              //     // Execute any logic that should take place if the save fails.
              //     // error is a Parse.Error with an error code and description.
              //     alert('Failed to create new object, with error code: ' + error.description);
              //    }
              //  }); 

              newUser.save(null, {
                success: function(object) {
                  $(".success").show();
                },
                error: function(model, error) {
                  $(".error").show();
                }
              });
          }
        </script>
    </body>
</html>
